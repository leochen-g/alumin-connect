{"version":3,"sources":["uni-app:///main.js","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?8b6c","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?7213","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?c781","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?6277","uni-app:///pages/user/main.vue","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?9fb3","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/user/main.vue?67fa"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,0F,6FAFmBA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC;AAGnBC,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6H;AAC7H;AACwD;AACL;AACsC;;;AAGzF;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,2FAAM;AACR,EAAE,oGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,+FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk0B,CAAgB,kyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkFt1B;AACA,yD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,aADA,EAEA,cAFA,EAGA,YACA,OADA,qBACA,CACA,0CACA,CAHA,EAIA,QAJA,sBAIA,CACA,2CACA,CANA,EAHA,EAWA,IAXA,kBAWA,CACA,SACA,YADA,GAGA,CAfA,EAgBA,MAhBA,oBAgBA,CACA;AACA,+BACA,aADA,IAGA,mBACA,mBACA,CACA,CAxBA,EAyBA,MAzBA,oBAyBA,CACA,mBACA,sBACA,CACA,CA7BA,EA8BA,WACA,WADA,yBACA,CACA,6CACA,wDACA,mCACA,gDACA,iCACA,4DACA,qEACA,CACA,CARA,EASA,CAXA,EAYA,cAZA,4BAYA,CACA,iBACA,2DACA,gCACA,CAFA,EAGA,CAjBA,EAkBA,MAlBA,kBAkBA,GAlBA,EAkBA,CACA,mBACA,8BACA,mDACA,4BACA,CAJA,MAIA,CACA,eACA,kBADA,EAEA,iBAFA,EAGA,iCAHA,IAKA,CACA,CA9BA,EA+BA,WA/BA,yBA+BA,CACA,+BACA,4BACA,CAlCA,EAmCA,aAnCA,2BAmCA,CACA,qDACA,iCACA,4BACA,CAvCA,EAwCA,SAxCA,uBAwCA,CACA,iCACA,4BACA,CA3CA,EA4CA;AACA,8CACA,iBACA,2BACA,6EACA,6DACA,WACA,aADA,EAEA;AACA,gCADA;AAEA,uBAFA,CAEA,aAFA,gBAEA,aAFA,CAEA,EAFA,gBAEA,EAFA;AAGA;AACA,wBADA;AAEA,0CAFA;AAGA,oBAHA;;AAKA;AACA;AACA;AACA;AACA,aAJA;AAKA,WAfA;;AAiBA,OApBA,MAoBA;AACA;AACA,uBADA;AAEA,0BAFA;AAGA,oCAHA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA;AACA,iBAPA;;AASA,aAVA,MAUA;AACA;AACA;AACA,WAlBA;;AAoBA;AACA,KAzFA,EA9BA,E;;;;;;;;;;;;ACpFA;AAAA;AAAA;AAAA;AAAyjD,CAAgB,y7CAAG,EAAC,C;;;;;;;;;;;ACA7kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/main.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=61c14258&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&id=61c14258&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61c14258\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=61c14258&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"user-main\">\n    <div class=\"user-content\">\n      <div class=\"user-header\" @click=\"goPath('user')\">\n        <img\n          :src=\"\n            userInfo\n              ? userInfo.avataUrl\n              : 'http://image.bloggeng.com/20190108160710.png'\n          \"\n          class=\"user-avataurl-img\"\n          alt=\"\"\n        />\n        <div class=\"user-base-info\">\n          <div class=\"user-nick-name\">\n            {{ userInfo ? userInfo.nickName : '昵称' }}\n          </div>\n          <div class=\"user-school\">\n            {{ userInfo ? userInfo.school.graduationTime : '毕业时间' }} @\n            {{ userInfo ? userInfo.school.university : '学校' }}\n          </div>\n        </div>\n        <div class=\"user-edit\" v-if=\"hasAuth\">\n          编辑 <span class=\"aliiconfont\">&#xe60f;</span>\n        </div>\n      </div>\n      <div v-if=\"hasAuth\">\n        <div class=\"user-block\">\n          <div class=\"user-info-item\" @click=\"goPath('school')\">\n            <div class=\"aliiconfont info-item-icon\">&#xe680;</div>\n            <div class=\"info-item-title\">院校</div>\n            <div class=\"aliiconfont user-edit-icon\">&#xe60f;</div>\n          </div>\n          <div class=\"user-info-item no-border\" @click=\"goPath('company')\">\n            <div class=\"aliiconfont info-item-icon\">&#xe615;</div>\n            <div class=\"info-item-title\">公司</div>\n            <div class=\"aliiconfont user-edit-icon\">&#xe60f;</div>\n          </div>\n        </div>\n        <div class=\"user-block\">\n          <div class=\"user-info-item\" @click=\"goUserTopic()\">\n            <div class=\"aliiconfont info-item-icon\">&#xe6e8;</div>\n            <div class=\"info-item-title\">话题</div>\n            <div class=\"aliiconfont user-edit-icon\">&#xe60f;</div>\n          </div>\n          <div class=\"user-info-item no-border\" @click=\"goUserMessage()\">\n            <div class=\"aliiconfont info-item-icon\">&#xe6a9;</div>\n            <div class=\"info-item-title\">\n              消息\n              <span class=\"messageCount\" v-if=\"msgCount\">{{\n                msgCount ? msgCount : ''\n              }}</span>\n            </div>\n            <div class=\"aliiconfont user-edit-icon\">&#xe60f;</div>\n          </div>\n        </div>\n        <div class=\"user-block\">\n          <div class=\"user-info-item no-border\" @click=\"goSetting()\">\n            <div class=\"aliiconfont info-item-icon\">&#xe642;</div>\n            <div class=\"info-item-title\">设置</div>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"!hasAuth\">\n        <div class=\"login-main\">\n          <button\n            open-type=\"getUserInfo\"\n            type=\"primary\"\n            size=\"default\"\n            class=\"login-btn\"\n            @getuserinfo=\"onGotUserInfo\"\n          >\n            登录\n          </button>\n          <div class=\"login-tips\">登陆后即刻开启校友生活</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport globalStore from '../../store/global-store';\nimport { getUserInfo, getUserUnReadMessageCount, login } from '../../http/api';\nexport default {\n  name: 'index',\n  components: {},\n  computed: {\n    hasAuth() {\n      return globalStore.state.hasAuth;\n    },\n    userInfo() {\n      return globalStore.state.userInfo;\n    },\n  },\n  data() {\n    return {\n      msgCount: '',\n    };\n  },\n  onLoad() {\n    // 小程序钩子\n    wx.setNavigationBarTitle({\n      title: '个人中心',\n    });\n    if (this.hasAuth) {\n      this.getUserInfo();\n    }\n  },\n  onShow() {\n    if (this.hasAuth) {\n      this.getUnReadCount();\n    }\n  },\n  methods: {\n    getUserInfo() {\n      getUserInfo().then((res) => {\n        globalStore.commit('updateUserInfo', res.data);\n        wx.setStorageSync('hasAuth', true);\n        globalStore.commit('updateAuth', true);\n        if (res.data.school.university) {\n          wx.setStorageSync('university', res.data.school.university);\n          globalStore.commit('increment', res.data.school.university);\n        }\n      });\n    },\n    getUnReadCount() {\n      let _this = this;\n      getUserUnReadMessageCount().then((res) => {\n        _this.msgCount = res.data.count;\n      });\n    },\n    goPath(val) {\n      if (this.hasAuth) {\n        let url = '../user-edit/main';\n        globalStore.commit('updateEditType', val);\n        wx.navigateTo({ url });\n      } else {\n        wx.showModal({\n          content: '登录后即可查看',\n          confirmText: '确认',\n          success: function (res) {},\n        });\n      }\n    },\n    goUserTopic() {\n      let url = '../user-topic/main';\n      wx.navigateTo({ url });\n    },\n    goUserMessage() {\n      globalStore.commit('updateCurrentTab', '1');\n      let url = '../user-message/main';\n      wx.navigateTo({ url });\n    },\n    goSetting() {\n      let url = '../user-setting/main';\n      wx.navigateTo({ url });\n    },\n    // 登录\n    onGotUserInfo: function (e) {\n      let _this = this;\n      if (e.mp.detail.userInfo) {\n        globalStore.commit('updateNickName', e.mp.detail.userInfo.nickName);\n        wx.setStorageSync('nickName', e.mp.detail.userInfo.nickName);\n        wx.login({\n          timeout: 3000,\n          success: (res) => {\n            const code = res.code;\n            const { encryptedData, iv } = e.mp.detail;\n            let req = {\n              code: code,\n              encryptedData: encryptedData,\n              iv: iv,\n            };\n            login(req).then((res) => {\n              wx.setStorageSync('token', res.data.token);\n              _this.getUserInfo();\n              _this.getUnReadCount();\n            });\n          },\n        });\n      } else {\n        wx.showModal({\n          title: '温馨提示',\n          showCancel: true,\n          content: '为了您更好的体验,请先同意授权',\n          success: function (res) {\n            if (res.confirm) {\n              wx.openSetting({\n                success: function (res) {\n                  if (res.authSetting['scope.userInfo']) {\n                    console.log('谢谢授权');\n                  } else {\n                    console.log('还是没有授权');\n                  }\n                },\n              });\n            } else if (res.cancel) {\n              console.log('用户点击取消');\n            }\n          },\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.user-main {\n  position: fixed;\n  background-color: #f2f2f2;\n  width: 100%;\n  height: 100%;\n}\n.user-content {\n  padding-top: 40rpx;\n}\n.user-header {\n  background-color: #ffffff;\n  display: flex;\n  position: relative;\n  justify-content: flex-start;\n  padding: 20rpx 20rpx;\n}\n.user-avataurl-img {\n  width: 120rpx;\n  height: 120rpx;\n  border-radius: 50%;\n}\n.user-base-info {\n  flex: 1;\n  padding: 20rpx;\n}\n.user-edit {\n  height: 120rpx;\n  line-height: 120rpx;\n  color: $grayColor;\n}\n.user-edit-icon {\n  color: $grayColor;\n}\n.user-nick-name {\n  font-size: 28rpx;\n}\n.user-school {\n  color: $grayColor;\n}\n.user-block {\n  margin-top: 40rpx background-color $whiteColor;\n}\n.user-info-item {\n  display: flex;\n  justify-content: flex-start;\n  padding: 20rpx;\n  height: 60rpx;\n  line-height: 60rpx;\n  background-color: $whiteColor;\n  border-bottom: 2rpx solid #e1e1e1;\n}\n.no-border {\n  border-bottom: none !important;\n}\n.info-item-icon {\n  font-size: 40rpx;\n  color: $themeColor;\n}\n.info-item-title {\n  flex: 1;\n  padding-left: 40rpx;\n  font-size: 28rpx;\n}\n.login-main {\n  padding-top: 200rpx;\n  height: 400rpx;\n  width: 100%;\n  text-align: center;\n}\n.login-btn {\n  width: 400rpx;\n}\n.login-tips {\n  padding-top: 20rpx;\n  color: #b5b5b5;\n  text-align: center;\n}\n.messageCount {\n  text-align: center;\n  display: inline-block;\n  background-color: $messageBackgroundColor;\n  color: $whiteColor;\n  width: 40rpx;\n  height: 40rpx;\n  line-height: 40rpx;\n  border-radius: 40rpx;\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=61c14258&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&id=61c14258&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1660708164994\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}