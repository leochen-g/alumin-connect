{"version":3,"sources":["uni-app:///main.js",null,"webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?d3d9","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?4ed7","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?12a9","uni-app:///pages/charts/main.vue","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?05ac","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?bc38","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?51a4","webpack:////Users/leo-chen/project/person-project/nuiAlumni/pages/charts/main.vue?77d2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":"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;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA,MAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAhBA;AAiBA,KAtMA;AAuMA,mBAvMA,6BAuMA;AACA;AACA;AACA;AACA,uBADA;;AAGA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA,OAtBA;AAuBA,KApOA;AAqOA,WArOA,qBAqOA;AACA;AACA;AACA,YADA;AAEA,YAFA;AAGA,mBAHA;AAIA,mBAJA;AAKA,uBALA;AAMA,uBANA;AAOA,+BAPA;AAQA;AACA;AACA;AACA,SAXA;AAYA;AACA;AACA,SAdA;AAeA,WAfA;AAgBA,KAvPA;AAwPA,WAxPA,mBAwPA,GAxPA,EAwPA;AACA;AACA;AACA,sBADA;;;AAIA;AACA,gBADA;AAEA;AACA;AACA,SAJA;AAKA;AACA;AACA,SAPA;;AASA,KAvQA;AAwQA,YAxQA,oBAwQA,IAxQA,EAwQA;AACA;AACA;AACA,qDADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA;AAEA,mBAFA;AAGA,gBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA;AAEA,mBAFA;AAGA,gBAHA;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEADA;AAEA,mBAFA;AAGA,gBAHA;;AAKA;AACA;AACA;AACA;AACA,uCADA;AAEA;AACA;AACA;AACA;AACA,0CADA;AAEA;AACA;AACA,qCADA;AAEA,uCAFA;AAGA,sCAHA;;AAKA,qBARA;;AAUA,iBAfA;AAgBA;AACA;AACA,iBAlBA;AAmBA,kBAnBA;AAoBA,aArBA,EAqBA,EArBA;AAsBA,WAvBA;AAwBA,SA1GA;AA2GA;AACA;AACA,SA7GA;;AA+GA,KAzXA,EArCA,E;;;;;;;;;;;;;ACpEA;AAAA;AAAA;AAAA;AAA+qC,CAAgB,+lCAAG,EAAC,C;;;;;;;;;;;ACAnsC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAyjD,CAAgB,y7CAAG,EAAC,C;;;;;;;;;;;ACA7kD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/charts/main.js","sourcesContent":["import 'uni-pages';wx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/charts/main.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=029c646c&scoped=true&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./main.vue?vue&type=style&index=1&id=029c646c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"029c646c\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/charts/main.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=template&id=029c646c&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=script&lang=js&\"","<template>\n  <div class=\"container\">\n    <div class=\"chartMain\">\n      <div class=\"title\">\n        <p class=\"school-name\">{{ university }}</p>\n        <p class=\"detail\">\n          你的<span class=\"city-count\">{{ userCount }}</span\n          >名校友遍布全国<span class=\"city-count\">{{ pCount }}</span\n          >个省区,<span class=\"city-count\">{{ locationCount }}</span\n          >个城市\n        </p>\n      </div>\n      <div class=\"proverb\">“{{ proverb }}”</div>\n      <div class=\"echarts-wrap\">\n        <mpvue-echarts\n          lazyLoad\n          @onInit=\"handleInitChart\"\n          disableTouch=\"true\"\n          ref=\"echarts\"\n          canvasId=\"demo-canvas\"\n        >\n        </mpvue-echarts>\n      </div>\n      <div class=\"top-location top1\" v-if=\"topName[0]\">\n        Top1 {{ topName[0] }} {{ topVal[0] }}人\n      </div>\n      <div class=\"top-location top2\" v-if=\"topName[1]\">\n        Top2 {{ topName[1] }} {{ topVal[1] }}人\n      </div>\n      <div class=\"top-location top3\" v-if=\"topName[2]\">\n        Top3 {{ topName[2] }} {{ topVal[2] }}人\n      </div>\n      <!--<div class=\"echarts-bar\">-->\n      <!--<mpvue-echarts lazyLoad=false :echarts=\"echarts\"  :onInit=\"initBar\" disableTouch=true ref=\"echartsBar\" canvasId=\"canvas-bar\" />-->\n      <!--</div>-->\n      <button class=\"sixedge-share\" open-type=\"share\">分享</button>\n      <button class=\"sixedge-share downLoad\" @click=\"saveImg\">下载</button>\n      <!-- <button class=\"sixedge-share say\" @click=\"goTopic\">聊聊</button> -->\n    </div>\n    <div class=\"echarts-hide\">\n      <mpvue-echarts\n        lazyLoad\n        @onInit=\"handleInitHideChart\"\n        disableTouch=\"true\"\n        ref=\"echartsHide\"\n        canvasId=\"hide-canvas\"\n      />\n    </div>\n    <div class=\"shareImg\">\n      <canvas\n\t\tid=\"shareCanvas\"\n        canvas-id=\"shareCanvas\"\n        style=\"width: 900px; height: 1766px\"\n      ></canvas>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from 'vuex';\nimport echarts from 'echarts';\nimport mpvueEcharts from '../../components/mpvue-echarts/src/echarts';\nimport { getMapData, getUserAndLocation } from '../../http/api';\nrequire('echarts/map/js/china');\nlet option = {};\nlet optionHide = {};\nlet chart = {};\nlet chartHide = {};\nexport default {\n  computed: {\n    ...mapGetters({\n      nickName: 'nickName',\n      university: 'university',\n    }),\n  },\n  components: {\n    mpvueEcharts,\n  },\n  data() {\n    return {\n      echarts,\n      // initBar: handleInitBarChart,\n      map: [],\n      pCount: 0,\n      topName: [],\n      topVal: [],\n      locationCount: '',\n      userCount: '',\n      proverb: '',\n      animationData: {},\n    };\n  },\n  onShareAppMessage(options) {\n    return {\n      title: '快来看看你的校友在哪里？',\n      path: '/pages/index/main',\n      success: function (res) {\n        console.log('分享成功');\n      },\n    };\n  },\n  mounted() {\n    this.getUniversityMap();\n    this.getStudentCount();\n  },\n  methods: {\n    handleInitChart({ width, height }) {\n      const canvas = this.$refs.echarts.canvas;\n      echarts.setCanvasCreator(() => canvas);\n      chart = echarts.init(canvas, null, {\n        width: width,\n        height: height,\n      });\n      canvas.setChart(chart);\n      chart.setOption(option);\n      this.$refs.echarts.setChart(chart);\n      // return chart; // 返回 chart 后可以自动绑定触摸操作\n    },\n    handleInitHideChart({ width, height }) {\n      const canvas = this.$refs.echartsHide.canvas;\n      echarts.setCanvasCreator(() => canvas);\n      chartHide = echarts.init(canvas, null, {\n        width: 1100,\n        height: 776,\n      });\n      canvas.setChart(this.chartHide);\n      chartHide.setOption(optionHide);\n      this.$refs.echartsHide.setChart(chartHide);\n      // return chartHide; // 返回 chart 后可以自动绑定触摸操作\n    },\n    goTopic() {\n      uni.switchTab({\n        url: '../topic/main',\n      });\n    },\n    convertData(data) {\n      var mapName = 'china';\n      var geoCoordMap = {};\n      // chart.showLoading()\n      var mapFeatures = echarts.getMap(mapName).geoJson.features;\n      // chart.hideLoading()\n      mapFeatures.forEach(function (v) {\n        // 地区名称o\n        var name = v.properties.name;\n        // 地区经纬度\n        geoCoordMap[name] = v.properties.cp;\n      });\n      var res = [];\n      for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name];\n        if (geoCoord !== '') {\n          res.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value),\n          });\n        }\n      }\n      return res;\n    },\n    initChart() {\n      var _this = this;\n      var mapName = 'china';\n      option = {\n        dataRange: {\n          show: false,\n          min: 0,\n          max: 100,\n          x: 'left',\n          y: 'bottom',\n          text: ['高', '低'],\n          calculable: true,\n          color: ['#246E88', '#4EFFF1'],\n        },\n        geo: {\n          show: true,\n          map: mapName,\n          label: {\n            normal: {\n              show: false,\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          roam: true,\n          itemStyle: {\n            normal: {\n              // areaColor: '#09283c',\n              areaColor: '#151515',\n              borderColor: '#385f98',\n              shadowColor: '#385f98',\n              shadowBlur: 4,\n            },\n            emphasis: {\n              areaColor: '#2B91B7',\n            },\n          },\n        },\n        series: [\n          {\n            type: 'map',\n            map: mapName,\n            geoIndex: 0,\n            aspectScale: 0.95,\n            showLegendSymbol: false,\n            roam: false,\n            itemStyle: {\n              normal: {\n                areaColor: '#031525',\n                borderColor: '#3B5077',\n              },\n            },\n            animation: false,\n            data: this.map,\n          },\n        ],\n      };\n      _this.$refs.echarts.init();\n    },\n    initHideChart() {\n      var _this = this;\n      var mapName = 'china';\n      optionHide = {\n        dataRange: {\n          show: false,\n          min: 0,\n          max: 100,\n          x: 'left',\n          y: 'bottom',\n          text: ['高', '低'],\n          calculable: true,\n          color: ['#246E88', '#4EFFF1'],\n        },\n        geo: {\n          show: true,\n          map: mapName,\n          label: {\n            normal: {\n              show: false,\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          roam: true,\n          itemStyle: {\n            normal: {\n              areaColor: '#151515',\n              borderColor: '#385f98',\n              shadowColor: '#385f98',\n              shadowBlur: 4,\n            },\n            emphasis: {\n              areaColor: '#2B91B7',\n            },\n          },\n        },\n        series: [\n          {\n            type: 'map',\n            map: mapName,\n            geoIndex: 0,\n            aspectScale: 0.95,\n            showLegendSymbol: false,\n            roam: false,\n            itemStyle: {\n              normal: {\n                areaColor: '#031525',\n                borderColor: '#3B5077',\n              },\n            },\n            animation: false,\n            data: this.map,\n          },\n        ],\n      };\n      _this.$refs.echartsHide.init();\n    },\n    getUniversityMap() {\n      var _this = this;\n      var val = _this.university;\n      _this.topName = [];\n      _this.topVal = [];\n      const req = {\n        university: val,\n      };\n      getMapData(req).then((res) => {\n        _this.map = res.data.list;\n        _this.pCount = res.data.list.length;\n        if (_this.pCount >= 5) {\n          for (var i = 0; i < 5; i++) {\n            _this.topName.push(_this.map[i].name);\n            _this.topVal.push(_this.map[i].value);\n          }\n        } else {\n          for (var j = 0; j < _this.pCount; j++) {\n            _this.topName.push(_this.map[j].name);\n            _this.topVal.push(_this.map[j].value);\n          }\n        }\n        _this.initChart();\n        _this.initHideChart();\n      });\n    },\n    getStudentCount() {\n      var _this = this;\n      var val = _this.university;\n      const req = {\n        university: val,\n      };\n      getUserAndLocation(req).then((res) => {\n        _this.userCount = res.data.userCount;\n        _this.locationCount = res.data.locationCount;\n        if (_this.locationCount < 2) {\n          _this.proverb = '寥若晨星';\n        } else if (_this.locationCount < 10) {\n          _this.proverb = '寥寥可数';\n        } else if (_this.locationCount < 20) {\n          _this.proverb = '风流云散';\n        } else if (_this.locationCount < 30) {\n          _this.proverb = '百川归海';\n        } else if (_this.locationCount < 50) {\n          _this.proverb = '星罗棋布';\n        } else if (_this.locationCount < 90) {\n          _this.proverb = '浩如烟海';\n        } else if (_this.locationCount < 150) {\n          _this.proverb = '不计其数';\n        } else if (_this.locationCount < 250) {\n          _this.proverb = '人才辈出';\n        } else if (_this.locationCount < 500) {\n          _this.proverb = '四海八荒';\n        }\n      });\n    },\n    saveImg() {\n      var _this = this;\n      this.$refs.echartsHide.canvasToTempFilePath({\n        x: 0,\n        y: 0,\n        width: 1100,\n        height: 776,\n        destWidth: 1100,\n        destHeight: 776,\n        canvasId: 'hide-canvas',\n        success: function (res) {\n\t\t\tconsole.log('res', res)\n          _this.drawImg(res.tempFilePath);\n        },\n\t\tfail: function(error) {\n\t\t\tconsole.log('生成错误', error)\n\t\t}\n      }, _this);\n    },\n    drawImg(url) {\n      var _this = this;\n      uni.showLoading({\n        title: '图片生成中',\n      });\n\t\n      uni.getImageInfo({\n        src: url,\n        success: function (res) {\n          _this.drawPath(res.path);\n        },\n\t\tfail: function(error) {\n\t\t\tconsole.log('error', error)\n\t\t}\n      });\n    },\n    drawPath(path) {\n      var _this = this;\n      uni.getImageInfo({\n        src: 'http://image.bloggeng.com/chart_bg.jpg',\n        success: (res) => {\n\t\t\t console.log('this', this)\n          const random = parseInt(9 * Math.random() + 90);\n          const ctx = uni.createCanvasContext('shareCanvas', this);\n          // 绘制背景\n          ctx.drawImage(res.path, 0, 0, 900, 1766);\n          // 绘制昵称\n          ctx.setTextAlign('center');\n          ctx.setFillStyle('#49EAE5');\n          ctx.setFontSize(50);\n          ctx.fillText(this.nickName, 900 / 2, 198, 500);\n          // 绘制详细信息\n          ctx.setTextAlign('left');\n          ctx.setFillStyle('#FFFFFF');\n          ctx.setFontSize(40);\n          ctx.fillText('您的校友遍布全国', 118, 300);\n\n          ctx.setFillStyle('#49EAE5');\n          ctx.setFontSize(40);\n          ctx.fillText(this.pCount, 450, 300);\n\n          ctx.setFillStyle('#FFFFFF');\n          ctx.setFontSize(40);\n          ctx.fillText('个省区，', 490, 300);\n\n          ctx.setFillStyle('#49EAE5');\n          ctx.setFontSize(40);\n          ctx.fillText(this.locationCount, 630, 300);\n\n          ctx.setFillStyle('#FFFFFF');\n          ctx.setFontSize(40);\n          ctx.fillText('个城市！', 670, 300);\n          // 绘制超过多少比例\n          ctx.setTextAlign('center');\n          ctx.setFillStyle('#FFFFFF');\n          ctx.setFontSize(40);\n          const str1 = '校友足迹超过' + random + '%的学校';\n          ctx.fillText(str1, 900 / 2, 410);\n          // 绘制谚语\n          ctx.setTextAlign('center');\n          ctx.setFillStyle('#49EAE5');\n          ctx.setFontSize(60);\n          ctx.fillText('“' + this.proverb + '”', 900 / 2, 520);\n          const mapWidth = 1100;\n          const mapHeight = 776;\n          ctx.drawImage(path, -100, 545, mapWidth, mapHeight);\n          // 绘制排名\n          if (this.topName[0]) {\n            ctx.setTextAlign('center');\n            ctx.setFillStyle('#FFFFFF');\n            ctx.setShadow(1, 1, 5, '#027fff');\n            ctx.setFontSize(40);\n            ctx.fillText(\n              'Top1 ' + this.topName[0] + ' ' + this.topVal[0] + '人',\n              900 / 2,\n              1361\n            );\n          }\n          if (this.topName[1]) {\n            ctx.setTextAlign('center');\n            ctx.setFillStyle('#FFFFFF');\n            ctx.setShadow(1, 1, 5, '#027fff');\n            ctx.setFontSize(35);\n            ctx.fillText(\n              'Top2 ' + this.topName[1] + ' ' + this.topVal[1] + '人',\n              900 / 2,\n              1416\n            );\n          }\n          if (this.topName[2]) {\n            ctx.setTextAlign('center');\n            ctx.setFillStyle('#FFFFFF');\n            ctx.setShadow(1, 1, 5, '#027fff');\n            ctx.setFontSize(30);\n            ctx.fillText(\n              'Top3 ' + this.topName[2] + ' ' + this.topVal[2] + '人',\n              900 / 2,\n              1471\n            );\n          }\n          ctx.draw(true, ()=> {\n\t\t\t  setTimeout(function () {\n\t\t\t    uni.canvasToTempFilePath({\n\t\t\t      canvasId: 'shareCanvas',\n\t\t\t      success: function (res) {\n\t\t\t        uni.hideLoading();\n\t\t\t        let tempFilePath = res.tempFilePath;\n\t\t\t        uni.saveImageToPhotosAlbum({\n\t\t\t          filePath: tempFilePath,\n\t\t\t          success: function () {\n\t\t\t            uni.showToast({\n\t\t\t              title: '保存成功',\n\t\t\t              icon: 'success',\n\t\t\t              duration: 2000,\n\t\t\t            });\n\t\t\t          },\n\t\t\t        });\n\t\t\t      },\n\t\t\t      fail: function () {\n\t\t\t        console.log('保存失败');\n\t\t\t      },\n\t\t\t    }, this);\n\t\t\t  }, 50);\n\t\t  });\n        },\n        fail: function () {\n          console.log('图片获取失败');\n        },\n      });\n    },\n  },\n};\n</script>\n<style>\n@keyframes rate {\n  from {\n    transform: perspective(400px) rotateY(0deg);\n  }\n  to {\n    transform: perspective(400px) rotateY(360deg);\n  }\n}\n@-webkit-keyframes rate {\n  from {\n    transform: perspective(400px) rotateY(0deg);\n  }\n  to {\n    transform: perspective(400px) rotateY(360deg);\n  }\n}\n</style>\n\n<style lang=\"scss\" scoped>\n.school-name {\n  color: $footColor;\n  font-weight: bold;\n  margin-bottom: 20rpx;\n  font-size: 36rpx;\n}\n.proverb {\n  margin-top: 40rpx;\n  color: $footColor;\n  font-size: 40rpx;\n  text-align: center;\n}\n.city-count {\n  color: $footColor;\n}\n.chartMain {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  /*background-image: url(\"http://image.bloggeng.com/20190104112037.png\");*/\n  background-image: url('http://image.bloggeng.com/chart_bg.jpg');\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n}\n.echarts-wrap {\n  margin-top: 86rpx;\n  width: 100%;\n  height: 500rpx;\n  padding: 4rpx 4rpx;\n  /*animation: rate 10s ease-in-out infinite;*/\n  margin-bottom: 40rpx;\n}\n.echarts-bar {\n  width: 95%;\n  height: 480rpx;\n  padding: 4rpx 4rpx;\n}\n.top-location {\n  text-align: center;\n  color: #ffffff;\n  font-weight: bold;\n  text-shadow: 1px 1px 5px $footColor;\n}\n.top1 {\n  font-size: 40rpx;\n}\n.top2 {\n  font-size: 35rpx;\n}\n.top3 {\n  font-size: 30rpx;\n}\n.title {\n  margin-top: 20rpx;\n  text-align: center;\n}\n.detail {\n  text-align: center;\n  font-size: 28rpx;\n  color: $whiteColor;\n}\n.sixedge-share {\n  margin: 0;\n  padding: 0;\n  font-size: 24rpx;\n  border-radius: 0;\n  overflow: visible;\n  height: 86.6rpx;\n  line-height: 88.6rpx;\n  text-align: center;\n  color: $footColor;\n  width: 50rpx;\n  position: absolute !important;\n  background-color: rgba(16, 82, 110, 0.8);\n  border-top: 2rpx solid $footColor;\n  border-bottom: 2rpx solid $footColor;\n  right: 50rpx;\n  bottom: 244rpx;\n  box-sizing: border-box !important;\n}\n.sixedge-share:after {\n  border-radius: 0;\n  content: '';\n  width: 50rpx;\n  height: 86.6rpx;\n  position: absolute !important;\n  background-color: rgba(16, 82, 110, 0.8);\n  top: -1rpx;\n  left: 50rpx;\n  transform: translate(-50%, -50%) !important;\n  transform: rotate(60deg) !important;\n  border-top: 2rpx solid $footColor;\n  border-bottom: 2rpx solid $footColor;\n  z-index: -1;\n  box-sizing: border-box;\n}\n.sixedge-share:before {\n  content: '';\n  width: 50rpx;\n  height: 86.6rpx;\n  position: absolute !important;\n  background-color: rgba(16, 82, 110, 0.8);\n  top: -1rpx;\n  right: 0rpx;\n  transform: translate(-50%, -50%);\n  transform: rotate(300deg);\n  border-bottom: 2rpx solid $footColor;\n  border-top: 2rpx solid $footColor;\n  z-index: -1;\n  box-sizing: border-box;\n}\n.downLoad {\n  right: 50rpx !important;\n  bottom: 153.4rpx !important;\n}\n.say {\n  right: 128rpx !important;\n  bottom: 106.4rpx !important;\n}\n.shareImg {\n  width: 900px;\n  height: 1766px;\n  position: fixed;\n  left: -500%;\n}\n.echarts-hide {\n  width: 1100px;\n  height: 776px;\n  position: fixed;\n  right: -300%;\n}\n.hover {\n  background-color: $footColor;\n}\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1660733139272\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=1&id=029c646c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./main.vue?vue&type=style&index=1&id=029c646c&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1660733139290\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}